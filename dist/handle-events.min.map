{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap","webpack:///./src/main.js","webpack:///./src/polyfill.js","webpack:///./src/facade.js","webpack:///./src/removeEventListener.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./src/adapter.js","webpack:///./src/utils.js","webpack:///./src/nodes-array.js","webpack:///./src/addEventListener.js","webpack:///./src/delegate.js","webpack:///./src/getEventListeners.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_facade__WEBPACK_IMPORTED_MODULE_1__","_addEventListener__WEBPACK_IMPORTED_MODULE_2__","_removeEventListener__WEBPACK_IMPORTED_MODULE_3__","_getEventListeners__WEBPACK_IMPORTED_MODULE_4__","_delegate__WEBPACK_IMPORTED_MODULE_5__","handleEvents","addEventListener","removeEventListener","getEventListeners","delegate","Element","matches","msMatchesSelector","webkitMatchesSelector","closest","el","this","document","documentElement","contains","parentElement","parentNode","nodeType","_removeEventListener__WEBPACK_IMPORTED_MODULE_0__","_addEventListener__WEBPACK_IMPORTED_MODULE_1__","_delegate__WEBPACK_IMPORTED_MODULE_2__","node","fluent","off","eventns","listener","on","useCapture","selector","_splitEventName","splitEventName","_splitEventName2","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default","event","namespace","data","NODES","find","events","keys","removeHandlers","eventData","eventType","toString","match","handler","detachEvent","forEach","type","filter","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","Array","isArray","_arr","_n","_d","_e","undefined","_s","_i","iterator","next","done","push","length","err","TypeError","attachEvent","eventName","concat","indexOf","substr","eventNamespace","addEventListenerBase","arguments","Error","delegated","eventHandler","e","delegateTarget","target","getHandlers","listeners","context"],"mappings":"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","file":"handle-events.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jsu\"] = factory();\n\telse\n\t\troot[\"jsu\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import './polyfill';\nimport handleEvents from './facade';\nimport addEventListener from './addEventListener';\nimport removeEventListener from './removeEventListener';\nimport getEventListeners from './getEventListeners';\nimport delegate from './delegate';\n\nexport default {\n  handleEvents,\n  addEventListener,\n  removeEventListener,\n  getEventListeners,\n  delegate,\n};\n","/**\n * @see\n * https://developer.mozilla.org/de/docs/Web/API/Element/closest\n */\nif (!Element.prototype.matches) {\n  Element.prototype.matches = Element.prototype.msMatchesSelector\n    || Element.prototype.webkitMatchesSelector;\n}\nif (!Element.prototype.closest) {\n  Element.prototype.closest = function closest(s) {\n    let el = this;\n    if (!document.documentElement.contains(el)) return null;\n    do {\n      if (el.matches(s)) return el;\n      el = el.parentElement || el.parentNode;\n    } while (el !== null && el.nodeType === 1);\n    return null;\n  };\n}\n","import removeEventListener from './removeEventListener';\nimport addEventListener from './addEventListener';\nimport delegate from './delegate';\n\n/**\n * Factory function that implements a fluent interface\n * to handle events by allowing method chaining.\n *\n * @param  {Element} node: DOM element\n * @return {Object}\n */\nexport default function handleEvents(node) {\n  const fluent = Object.create(null);\n  fluent.off = (eventns, listener) => {\n    removeEventListener(node, eventns, listener);\n    return fluent;\n  };\n  fluent.on = (eventns, listener, useCapture) => {\n    addEventListener(node, eventns, listener, useCapture);\n    return fluent;\n  };\n  fluent.delegate = (eventns, selector, listener, useCapture) => {\n    delegate(node, eventns, selector, listener, useCapture);\n    return fluent;\n  };\n  return fluent;\n}\n","import {detachEvent} from './adapter';\nimport {splitEventName, match} from './utils';\nimport NODES from './nodes-array';\n\n/**\n * Removes an event-handler from a DOM element.\n * Events with namespace are allowed.\n *\n * @param {Element} node: DOM element\n * @param {String} [eventns]: name of the event/namespace to remove\n * @param {Function} [listener]: event handler\n */\nexport default function removeEventListener(node, eventns, listener) {\n  const [event, namespace] = splitEventName(eventns);\n  // gets the events associated to a DOM node\n  const data = NODES.find(d => d.node === node);\n  if (!data) return;\n  const events = event ? [event] : Object.keys(data.events);\n  const removeHandlers = function remove(eventData) {\n    const eventType = this.toString();\n    if (\n      (!listener && !eventns)\n      || (match(event, eventType, namespace, eventData.namespace, listener))\n      || (eventData.handler === listener\n        && (!eventns || match(event, eventType, namespace, eventData.namespace))\n      )) return !!detachEvent(node, eventType, eventData.handler, eventData.useCapture);\n    return true;\n  };\n  events.forEach((type) => {\n    // removes event-handlers by type, namespace or listener\n    data.events[type] = (data.events[type] || []).filter(removeHandlers, type);\n  });\n}\n","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","/**\n * Attaches an event-handler to a DOM element.\n *\n * @param {Element} node: DOM element\n * @param {String} eventName: name of the event to register\n * @param {Function} listener: event handler\n * @param {Boolean} [useCapture=false]: event capture\n */\nexport function attachEvent(node, eventName, listener, useCapture) {\n  if (node.addEventListener) {\n    node.addEventListener(eventName, listener, !!useCapture);\n  } else {\n    node.attachEvent(`on${eventName}`, listener);\n  }\n}\n\n/**\n * Removes an event-handler from a DOM element.\n *\n * @param {Element} node: DOM element\n * @param {String} eventName: name of the event to register\n * @param {Function} listener: event handler\n * @param {Boolean} [useCapture=false]: event capture\n */\nexport function detachEvent(node, eventName, listener, useCapture) {\n  if (node.removeEventListener) {\n    node.removeEventListener(eventName, listener, !!useCapture);\n  } else {\n    node.detachEvent(`on${eventName}`, listener);\n  }\n}\n","/**\n * Split the event name and the namespace\n *\n * @param  {String} eventns: name of the event/namespace\n * @return {Array}\n */\nexport function splitEventName(eventns) {\n  const i = (eventns || '').indexOf('.'),\n    event = i > -1 ? eventns.substr(0, i) : eventns,\n    namespace = i > -1 ? eventns.substr(i + 1) : undefined;\n  return [event, namespace];\n}\n\n/**\n * Rules to match event handlers\n *\n * @param  {String} eventName: event name passed to the invoker function\n * @param  {String} eventType: event type in the `data.events` object\n * @param  {String} namespace: namespace passed to the invoker function\n * @param  {String} eventNamespace: namespace associated to the handler in `eventData` object\n * @param  {Function} handler: envent listener passed to the invoker function\n * @return {Boolean}\n */\nexport function match(eventName, eventType, namespace, eventNamespace, handler) {\n  return !handler && (\n    (eventName === eventType && !namespace)\n    || (namespace === eventNamespace && !eventName)\n    || (namespace === eventNamespace && eventName === eventType)\n  );\n}\n","const NODES = [];\n\nexport default NODES;\n","import {attachEvent} from './adapter';\nimport {splitEventName} from './utils';\nimport NODES from './nodes-array';\n\n/**\n * Attaches an event-handler to a DOM element.\n * Events with namespace are allowed.\n * Event delegation is allowed.\n *\n * @param {Element} node: DOM element\n * @param {String} eventns: name of the event/namespace to register\n * @param {Function} listener: event handler\n * @param {Boolean} useCapture: event capture\n * @param {String} selector: CSS selector to the element delegated\n */\nexport function addEventListenerBase(node, eventns, listener, useCapture = false, selector) {\n  const [event, namespace] = splitEventName(eventns);\n  if (!event) throw Error('Event name was not provided');\n  // gets the events associated to a DOM node\n  let data = NODES.find(d => d.node === node);\n  if (data === undefined) {\n    data = Object.create(null); // no inherited properties\n    data.events = Object.create(null);\n    data.node = node;\n    NODES.push(data);\n  }\n  // checks if the node has listeners associated to the event\n  if (!data.events[event]) data.events[event] = [];\n  const eventData = Object.create(null);\n  eventData.namespace = namespace;\n  eventData.handler = listener;\n  eventData.useCapture = useCapture;\n  eventData.selector = selector;\n  eventData.delegated = selector && typeof selector === 'string';\n  // registers the event listener into the events\n  data.events[event].push(eventData);\n  attachEvent(node, event, listener, useCapture);\n}\n\n/**\n * Attaches an event-handler to a DOM element.\n * Events with namespace are allowed.\n *\n * @param {Element} node: DOM element\n * @param {String} eventns: name of the event/namespace to register\n * @param {Function} listener: event handler\n * @param {Boolean} [useCapture=false]: event capture\n */\nexport default function addEventListener(node, eventns, listener, useCapture) {\n  addEventListenerBase(node, eventns, listener, useCapture);\n}\n","import {addEventListenerBase} from './addEventListener';\nimport {splitEventName} from './utils';\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} node: DOM element\n * @param {String} eventns: name of the event/namespace to register\n * @param {String} selector: CSS selector for those elements that will propagate the event\n * @param {Function} listener: event handler\n * @return {Function}\n */\nfunction listenerHelper(node, eventns, selector, listener) {\n  return function eventHandler(e) {\n    const [event] = splitEventName(eventns);\n    e.delegateTarget = e.target.closest(selector, event);\n    if (e.delegateTarget) {\n      // TODO: shouldn't be:\n      // listener.call(e.delegateTarget, e)\n      listener.call(node, e);\n    }\n  };\n}\n\n/**\n * Attaches a listener to a DOM `Element` but delegates the event-listener\n * to the DOM Elements beneath that matches with the `selector` provided.\n *\n * @param {Element} node: DOM element\n * @param {String} eventns: name of the event/namespace to register\n * @param {String} selector: CSS selector for those elements that will propagate the event\n * @param {Function} listener: event handler\n * @param {Boolean} [useCapture=false]: event capture\n */\nexport default function delegate(node, eventns, selector, listener, useCapture) {\n  const eventHandler = listenerHelper(node, eventns, selector, listener);\n  addEventListenerBase(node, eventns, eventHandler, useCapture, selector);\n}\n","import {splitEventName, match} from './utils';\nimport NODES from './nodes-array';\n\n/**\n * Gets the `eventData` objects matching the criteria\n *\n * @private\n * @param {Object} eventData: the event data associated to the event registered\n */\nfunction getHandlers(eventData) {\n  const {eventName, eventType, namespace, listeners} = this;\n  if (match(eventName, eventType, namespace, eventData.namespace)) {\n    listeners[eventType] = listeners[eventType] || [];\n    listeners[eventType].push(eventData);\n  }\n}\n\n/**\n * Gets all event-handlers from a DOM element.\n * Events with namespace are allowed.\n *\n * @param  {Element} node: DOM element\n * @param  {String} [eventns]: name of the event/namespace\n * @return {Object}\n */\nexport default function getEventListeners(node, eventns) {\n  const [event, namespace] = splitEventName(eventns);\n  // gets the events associated to a DOM node\n  const data = NODES.find(d => d.node === node);\n  const context = {\n    namespace,\n    eventName: event,\n    listeners: {},\n  };\n  if (!data) return context.listeners;\n  if (!eventns) return data.events; // Object with all event types\n  const events = event ? [event] : Object.keys(data.events);\n  events.forEach((eventType) => {\n    context.eventType = eventType;\n    (data.events[eventType] || []).forEach(getHandlers, context);\n  });\n  return context.listeners;\n}\n"],"sourceRoot":""}